<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Suivi Sport V3.2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <!-- Chart.js pour les graphiques -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <h1>Suivi Sport</h1>
      <p id="current-date-label"></p>
    </header>

    <!-- Bandeau de rappels -->
    <div id="reminder-banner" class="reminder-banner hidden"></div>

    <main>
      <!-- Onglet Aujourd'hui -->
      <section id="tab-today" class="tab-section active">
        <h2>Aujourd'hui</h2>

        <!-- Rituel du matin : poids -->
        <section class="card">
          <h3>Poids du jour</h3>
          <div class="row">
            <input type="number" id="today-weight-input" step="0.1" placeholder="Poids (kg)" />
            <button id="save-today-weight-btn">Enregistrer</button>
          </div>
          <p id="today-weight-info" class="small-info"></p>
        </section>

<section class="card">
  <h3>Composition corporelle (optionnel)</h3>

  <div class="grid-2">
    <div class="field">
      <label>Masse grasse (%)</label>
      <input id="today-fat-input" type="number" step="0.1" placeholder="ex : 24.5" />
    </div>

    <div class="field">
      <label>Masse musculaire (%)</label>
      <input id="today-muscle-input" type="number" step="0.1" placeholder="ex : 38.2" />
    </div>

    <div class="field">
      <label>Masse hydrique / eau (%)</label>
      <input id="today-water-input" type="number" step="0.1" placeholder="ex : 55.8" />
    </div>

    <div class="field">
      <label>Masse osseuse (kg)</label>
      <input id="today-bone-input" type="number" step="0.1" placeholder="ex : 3.1" />
    </div>
  </div>

  <div class="row">
    <button id="save-today-bodycomp-btn" class="primary-btn">Enregistrer</button>
  </div>

  <p id="today-bodycomp-info" class="small-info"></p>
</section>

        <!-- Alimentation -->
        <section class="card">
          <h3>Alimentation du jour</h3>

          <div class="meal-block">
            <label for="meal-breakfast">Petit-déjeuner</label>
            <textarea id="meal-breakfast" rows="2" placeholder="Ce que tu as mangé..."></textarea>
            <button data-meal-type="petit-dejeuner" class="save-meal-btn">Enregistrer</button>
          </div>

          <div class="meal-block">
            <label for="meal-lunch">Déjeuner</label>
            <textarea id="meal-lunch" rows="2" placeholder="Ce que tu as mangé..."></textarea>
            <button data-meal-type="dejeuner" class="save-meal-btn">Enregistrer</button>
          </div>

          <div class="meal-block">
            <label for="meal-dinner">Dîner</label>
            <textarea id="meal-dinner" rows="2" placeholder="Ce que tu as mangé..."></textarea>
            <button data-meal-type="diner" class="save-meal-btn">Enregistrer</button>
          </div>

          <div class="meal-block">
            <label for="meal-snack">Collations</label>
            <textarea id="meal-snack" rows="2" placeholder="Snacks, boissons..."></textarea>
            <button data-meal-type="collation" class="save-meal-btn">Enregistrer</button>
          </div>
        </section>

        <!-- Calories du jour -->
        <section class="card">
          <h3>Calories du jour</h3>
          <div class="row">
            <input type="number" id="today-calories-input" step="1" placeholder="Calories (kcal)" />
          </div>
          <div class="row">
            <button id="auto-calc-calories-btn" class="secondary-btn">
              Calculer à partir des repas
            </button>
            <button id="save-today-calories-btn" class="primary-btn">
              Enregistrer
            </button>
          </div>
          <p id="today-calories-info" class="small-info"></p>
        </section>

        <!-- Séance du jour -->
        <section class="card">
          <h3>Séance du jour</h3>
          <div id="today-workout-preview"></div>
          <button id="open-today-workout-btn" class="secondary-btn">Ouvrir la séance</button>
          <button id="create-free-workout-btn" class="link-btn">Créer une séance libre</button>
        </section>
      </section>

      <!-- Onglet Programme -->
      <section id="tab-program" class="tab-section">
        <h2>Programme de la semaine</h2>

        <section class="card">
          <h3>Semaine</h3>
          <div id="week-days-container" class="week-days"></div>
          <button id="duplicate-week-btn" class="secondary-btn week-duplicate-btn">
            Dupliquer cette semaine vers la suivante
          </button>
        </section>

        <section class="card">
          <h3 id="program-editor-title">Programme du jour sélectionné</h3>
          <div class="row">
            <input type="date" id="program-date-picker" />
            <button id="duplicate-day-btn" class="secondary-btn">Dupliquer un jour</button>
          </div>

          <button id="suggest-exercises-btn" class="secondary-btn" style="margin-bottom:0.5rem;">
            Idées d'exercices
          </button>

          <div id="program-exercises-container"></div>
          <button id="add-program-exercise-btn">Ajouter un exercice</button>
          <button id="save-program-day-btn" class="primary-btn">Enregistrer ce jour</button>
        </section>
      </section>

      <!-- Onglet Historique & Stats -->
      <section id="tab-history" class="tab-section">
        <h2>Historique & Stats</h2>

<section class="card">
  <h3>Composition corporelle</h3>

  <div class="chart-block">
    <h4>Poids (kg) vs Masse grasse (%)</h4>
    <canvas id="weight-fat-chart" height="220"></canvas>
  </div>

  <div class="chart-block">
    <h4>Masse grasse (%)</h4>
    <canvas id="fat-chart" height="200"></canvas>
  </div>

  <div class="chart-block">
    <h4>Masse musculaire (%)</h4>
    <canvas id="muscle-chart" height="200"></canvas>
  </div>

  <div class="chart-block">
    <h4>Eau (%)</h4>
    <canvas id="water-chart" height="200"></canvas>
  </div>

  <div class="chart-block">
    <h4>Masse osseuse (kg)</h4>
    <canvas id="bone-chart" height="200"></canvas>
  </div>
</section>

        <section class="card">
          <h3>Période</h3>
          <div class="row row-wrap">
            <div class="col-2">
              <label for="history-start-date">Du</label>
              <input type="date" id="history-start-date" />
            </div>
            <div class="col-2">
              <label for="history-end-date">Au</label>
              <input type="date" id="history-end-date" />
            </div>
          </div>
          <div class="row">
            <button id="set-this-week-btn" class="secondary-btn">Cette semaine</button>
            <button id="set-this-month-btn" class="secondary-btn">Ce mois</button>
            <button id="apply-history-filter-btn" class="primary-btn">Appliquer</button>
            <button id="print-history-btn" class="secondary-btn">Exporter en PDF</button>
          </div>
        </section>

        <section class="card">
          <h3>Résumé</h3>
          <p id="summary-text"></p>
        </section>

        <section class="card">
          <h3>Évolution du poids</h3>
          <canvas id="weight-chart" height="200"></canvas>
        </section>

        <section class="card">
          <h3>Évolution de l'IMC</h3>
          <canvas id="bmi-chart" height="200"></canvas>
        </section>

        <section class="card">
          <h3>Évolution des calories</h3>
          <canvas id="calories-chart" height="200"></canvas>
        </section>

        <section class="card">
          <h3>Volume d'entraînement</h3>
          <canvas id="volume-chart" height="200"></canvas>
        </section>

        <section class="card">
          <h3>Séances de la période</h3>
          <div id="history-workouts-list"></div>
        </section>

        <section class="card">
          <h3>Mes records</h3>
          <div id="records-list"></div>
        </section>
      </section>

      <!-- Onglet Paramètres -->
      <section id="tab-settings" class="tab-section">
        <h2>Paramètres</h2>

        <section class="card">
          <h3>Profil</h3>
          <div class="row">
            <label for="profile-height">Taille (cm)</label>
            <input type="number" id="profile-height" />
          </div>
          <div class="row">
            <label for="profile-target-weight">Objectif poids (kg)</label>
            <input type="number" id="profile-target-weight" step="0.1" />
          </div>
          <button id="save-profile-btn" class="primary-btn">Enregistrer le profil</button>
          <p id="profile-info" class="small-info"></p>
        </section>

        <section class="card">
          <h3>Affichage</h3>
          <div class="row">
            <label for="theme-select">Thème</label>
            <select id="theme-select">
              <option value="dark">Sombre</option>
              <option value="light">Clair</option>
            </select>
          </div>
        </section>

        <section class="card">
          <h3>Rappels</h3>
          <div class="row">
            <label for="reminders-toggle">Activer les rappels internes</label>
            <input type="checkbox" id="reminders-toggle" />
          </div>
          <p class="small-info">
            Les rappels apparaissent en haut de l'écran si tu n'as pas saisi ton poids
            ou si une séance est prévue aujourd'hui sans séance enregistrée.
          </p>
        </section>

        <section class="card">
          <h3>Données</h3>
          <button id="export-data-btn" class="secondary-btn">Exporter les données (JSON)</button>
        </section>
      </section>
    </main>

    <!-- Navigation bas -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-tab="tab-today">Aujourd'hui</button>
      <button class="nav-btn" data-tab="tab-program">Programme</button>
      <button class="nav-btn" data-tab="tab-history">Historique</button>
      <button class="nav-btn" data-tab="tab-settings">Paramètres</button>
    </nav>
  </div>

  <!-- Modal séance du jour -->
  <div id="workout-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Séance du jour</h3>
      <p id="workout-modal-date"></p>
      <div id="workout-exercises-container"></div>
      <div class="modal-actions">
        <button id="add-workout-exercise-btn" class="secondary-btn">Ajouter un exercice</button>
        <button id="save-workout-btn" class="primary-btn">Enregistrer la séance</button>
        <button id="close-workout-modal-btn" class="link-btn">Fermer</button>
      </div>
    </div>
  </div>

  <!-- Modal nouvel aliment (calories inconnues) -->
  <div id="food-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Nouvel aliment</h3>
      <p id="food-modal-question"></p>
      <div class="row">
        <label for="food-calories-input">Calories pour 1 portion (kcal)</label>
        <input type="number" id="food-calories-input" />
      </div>
      <div class="modal-actions">
        <button id="food-save-btn" class="primary-btn">Enregistrer</button>
        <button id="food-cancel-btn" class="link-btn">Annuler</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>